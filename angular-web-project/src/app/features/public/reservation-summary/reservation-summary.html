<div class="reservation-summary-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando resumen de reserva...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="!isLoading && loadError" class="error-state">
    <div class="error-icon">‚ö†Ô∏è</div>
    <h2>Error al cargar la reserva</h2>
    <p>{{ loadError }}</p>
    <button class="btn-primary" (click)="goHome()">Volver al inicio</button>
  </div>

  <!-- Success State -->
  <div *ngIf="!isLoading && !loadError && reservation" class="summary-content">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <img src="/angular-web-project/public/logo.png" alt="Logo">
      </div>
      <div class="contact-info">
        <span>üìû Para reservar 601 743 6620</span>
      </div>
    </div>

    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="step active">
        <div class="step-number">1</div>
        <span class="step-label">Informaci√≥n de la estadia</span>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <span class="step-label">M√©todo de pago</span>
      </div>
    </div>

    <div class="main-content">
      <div class="form-section">

        <h2 class="section-title">Datos Personales</h2>
        <p class="section-subtitle">Deber√° presentar una identificaci√≥n oficial al llegar al alojamiento.</p>

        <div class="form-grid">
          <div class="form-group">
            <label>Nombre Completo</label>
            <input 
              type="text" 
              placeholder="Cargando..." 
              class="form-input"
              [value]="userName"
              [class.has-value]="userName"
              readonly>
          </div>
		  <div class="form-group">
            <label>Documento</label>
            <input 
              type="text" 
              placeholder="Cargando..." 
              class="form-input"
              [value]="userDocument"
              [class.has-value]="userDocument"
              readonly>
          </div>
        </div>

        <div class="form-group">
          <label>Correo electr√≥nico</label>
          <input 
            type="email" 
            placeholder="Cargando..." 
            class="form-input"
            [value]="userEmail"
            [class.has-value]="userEmail"
            readonly>
        </div>

        <div class="form-group">
          <label>Tel√©fono</label>
          <div class="phone-input">
            <input 
              type="tel" 
              placeholder="Cargando..." 
              class="form-input"
              [value]="userPhone"
              [class.has-value]="userPhone"
              readonly>
          </div>
        </div>

        <h2 class="section-title mt-4">Facturaci√≥n</h2>
        <p class="section-description">La factura llegar√° en las pr√≥ximas 24 horas al correo de su reservaci√≥n despu√©s de la confirmaci√≥n.</p>

        <div class="checkbox-group">
          <input type="checkbox" id="needInvoice" disabled>
          <label for="needInvoice">Necesito facturar mi compra</label>
        </div>

        <div class="terms-section">
          <p>Al hacer clic en el bot√≥n "Continuar", acepto las <a href="">pol√≠ticas de reservaci√≥n</a> y nuestro <a href="">aviso de privacidad</a>.</p>
        </div>

        <button class="btn-continue" (click)="continuarReserva()">Continuar</button>
      </div>

      <!-- Right Column - Summary Section -->
      <div class="summary-section">
        <h3 class="summary-title">Resumen de pago</h3>

        <div class="price-breakdown">
          <div class="price-row">
            <span>1 habitaci√≥n, {{ nights }} noche{{ nights !== 1 ? 's' : '' }}</span>
            <span class="price">{{ formatCurrency(subtotal) }}</span>
          </div>
          <div class="price-row">
            <span>Impuestos</span>
            <span class="price">{{ taxes ? formatCurrency(taxes) : 'No incluidos' }}</span>
          </div>
        </div>

        <div class="total-section">
          <div class="total-row">
            <span class="total-label">Total</span>
            <span class="total-price">{{ formatCurrency(total) }}</span>
          </div>
          <div class="additional-charges">
            <span class="info-icon">‚ÑπÔ∏è</span>
            <span>S√≥lo residentes locales</span>
            <span class="charge-price">{{ formatCurrency(taxes) }}</span>
          </div>
          <p class="charges-note">*Pagar√°s los cargos adicionales al llegar al alojamiento.</p>
        </div>

        <div class="reservation-details">
          <h4 class="details-title">
            <span class="hotel-icon">üè®</span>
            Hotel
            <button class="collapse-btn">‚ñ≤</button>
          </h4>

          <div class="hotel-info">
            <h5 class="hotel-name">{{ hotelName }}</h5>
            <div class="hotel-coordinates">
              <p class="coordinate-item">
                <span class="coordinate-label">üìç Latitud:</span>
                <span class="coordinate-value">{{ hotelLatitude || 'N/A' }}</span>
              </p>
              <p class="coordinate-item">
                <span class="coordinate-label">üìç Longitud:</span>
                <span class="coordinate-value">{{ hotelLongitude || 'N/A' }}</span>
              </p>
            </div>
          </div>

          <div class="reservation-dates">
            <div class="date-info">
              <span class="date-label">Llegada</span>
              <span class="date-value">{{ formatDate(checkIn) }} {{ formatTime(checkIn, '15:00') }} - 00:00</span>
            </div>
            <div class="date-info">
              <span class="date-label">Salida</span>
              <span class="date-value">{{ formatDate(checkOut) }} {{ formatTime(checkOut, '12:00') }} (medio d√≠a)</span>
            </div>
          </div>

          <div class="stay-duration">
            <span class="duration-label">Duraci√≥n de la estancia</span>
            <span class="duration-value">{{ nights }} noche{{ nights !== 1 ? 's' : '' }}</span>
          </div>

          <h4 class="details-subtitle">
            <span class="room-icon">üõèÔ∏è</span>
            Informaci√≥n de la Habitaci√≥n
          </h4>

          <div class="room-info-grid">
            <div class="info-item">
              <span class="info-label">Tipo de habitaci√≥n:</span>
              <span class="info-value">{{ roomTypeName ? roomTypeName : 'N/A' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">N√∫mero de habitaci√≥n:</span>
              <span class="info-value">{{ roomNumber ? roomNumber : 'N/A' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Tema/Decoraci√≥n:</span>
              <span class="info-value">{{ roomTheme ? roomTheme : 'N/A' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Capacidad:</span>
              <span class="info-value">{{ capacity ? (capacity + ' persona' + (capacity !== 1 ? 's' : '')) : 'N/A' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Precio por noche:</span>
              <span class="info-value">{{ basePrice ? formatCurrency(basePrice) : '$ 0 COP' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">C√≥digo de reserva:</span>
              <span class="info-value highlight">{{ reservationCode }}</span>
            </div>
          </div>

          <div class="cancellation-info">
            <p class="cancellation-policy">
              ‚úì Cancelaci√≥n gratuita hasta el {{ formatDate(checkIn) }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
