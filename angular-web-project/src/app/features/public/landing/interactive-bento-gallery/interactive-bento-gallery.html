<section class="gallery-container">
  <h2 class="gallery-title">Explora nuestras runas</h2>
  <p class="gallery-subtitle">
    Drag and explore our curated collection of Colombian shots
  </p>

  <!-- Grid con drag & drop -->
  <div
    cdkDropList
    class="bento-grid"
    (cdkDropListDropped)="drop($event)"
  >
    <div
      class="bento-item"
      *ngFor="let item of items"
      cdkDrag
      [ngClass]="item.span"
      (click)="openModal(item)"
    >
      <ng-container [ngSwitch]="item.type">
        <img
          *ngSwitchCase="'image'"
          [src]="item.src"
          [alt]="item.alt"
          loading="lazy"
          decoding="async"
        />
        <video
          *ngSwitchCase="'video'"
          [src]="item.src"
          [poster]="item.poster"
          autoplay
          muted
          loop
          playsinline
        ></video>
      </ng-container>

      <div class="overlay-text" *ngIf="item.title || item.desc">
        <h3>{{ item.title }}</h3>
        <p>{{ item.desc }}</p>
      </div>
    </div>
  </div>
</section>

<!-- Modal -->
<div
  class="modal-backdrop"
  *ngIf="selectedItem"
  (click)="closeModal()"
>
  <div class="modal-content" (click)="$event.stopPropagation()">
    <ng-container [ngSwitch]="selectedItem.type">
      <img
        *ngSwitchCase="'image'"
        [src]="selectedItem.src"
        [alt]="selectedItem.alt"
      />
      <video
        *ngSwitchCase="'video'"
        [src]="selectedItem.src"
        [poster]="selectedItem.poster"
        autoplay
        muted
        loop
        playsinline
      ></video>
    </ng-container>

    <div class="caption">
      <h3>{{ selectedItem.title }}</h3>
      <p>{{ selectedItem.desc }}</p>
    </div>

    <button class="close-btn" (click)="closeModal()">âœ•</button>
  </div>
</div>
