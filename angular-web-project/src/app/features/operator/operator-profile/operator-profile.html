<div class="profile-container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="page-title mb-0"><i class="bi bi-person-circle me-2"></i>Mi Perfil</h3>
  </div>

  <div class="card-elev p-4">
    <form #f="ngForm" (ngSubmit)="save(f)">
      <div class="row g-4">
        <!-- Avatar Section -->
        <div class="col-md-4">
          <div class="avatar-section text-center">
            <div class="mb-3">
              <label class="form-label fw-semibold">Foto de Perfil</label>
            </div>
            <div class="avatar-wrapper mx-auto">
              <img
                [src]="img(draft.selected_pet)"
                (error)="imgBroken = true"
                (load)="imgBroken = false"
                alt="Avatar"
                class="avatar-preview"
              />
              <div class="avatar-overlay">
                <i class="bi bi-camera-fill"></i>
              </div>
            </div>
            <div *ngIf="imgBroken" class="alert alert-warning small mt-2">
              <i class="bi bi-exclamation-triangle me-1"></i>
              No se pudo cargar la imagen
            </div>
            <div class="mt-3">
              <label class="form-label small text-secondary">URL de la imagen</label>
              <input
                class="form-control input-soft"
                name="selected_pet"
                [(ngModel)]="draft.selected_pet"
                placeholder="/images/icons/icono.png"
              />
            </div>
          </div>
        </div>

        <!-- Info Section -->
        <div class="col-md-8">
          <div class="info-section">
            <h5 class="section-title mb-3">
              <i class="bi bi-info-circle me-2"></i>Información Personal
            </h5>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label"> <i class="bi bi-person me-1"></i>Nombre completo </label>
                <input
                  class="form-control input-soft"
                  name="full_name"
                  [(ngModel)]="draft.full_name"
                  placeholder="Ingresa tu nombre completo"
                />
              </div>
              <div class="col-md-6">
                <label class="form-label"> <i class="bi bi-envelope me-1"></i>Email </label>
                <input
                  class="form-control input-soft"
                  name="email"
                  [value]="me?.email"
                  disabled
                  readonly
                  title="Email del usuario"
                />
                <small class="text-muted">El email no puede ser modificado</small>
              </div>
              <div class="col-md-6">
                <label class="form-label"> <i class="bi bi-telephone me-1"></i>Teléfono </label>
                <input
                  class="form-control input-soft"
                  name="phone"
                  [(ngModel)]="draft.phone"
                  placeholder="+57 300 123 4567"
                />
              </div>
              <div class="col-md-6">
                <label class="form-label">
                  <i class="bi bi-card-text me-1"></i>Documento de Identidad
                </label>
                <input
                  class="form-control input-soft"
                  name="national_id"
                  [(ngModel)]="draft.national_id"
                  placeholder="123456789"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="mt-4 pt-3 border-top d-flex gap-2 justify-content-end">
        <button class="btn btn-olive px-4" type="submit" (mousedown)="editTouched = true">
          <i class="bi bi-check-circle me-2"></i>Guardar Cambios
        </button>
        <button type="button" class="btn btn-outline-danger px-4" (click)="deleteAccount()">
          <i class="bi bi-trash me-2"></i>Eliminar Cuenta
        </button>
      </div>
    </form>
  </div>
</div>
