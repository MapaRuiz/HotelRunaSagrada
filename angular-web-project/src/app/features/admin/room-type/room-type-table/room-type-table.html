<h4 class="mb-3">Room Types</h4>

<div class="d-flex justify-content-between align-items-center mb-2">
  <button class="btn btn-primary" (click)="new()">Nuevo tipo</button>
  <div *ngIf="loading" class="text-muted">Cargando…</div>
</div>

<!-- Form inline -->
<div *ngIf="showForm" class="card mt-3">
  <div class="card-body">
    <h5 class="card-title">{{ editingId ? 'Editar tipo' : 'Nuevo tipo' }}</h5>

    <div class="row g-2">
      <div class="col-sm-6">
        <label class="form-label">Nombre</label>
        <input class="form-control" [(ngModel)]="draft.name" />
      </div>
      <div class="col-sm-3">
        <label class="form-label">Capacidad</label>
        <input class="form-control" type="number" min="1" [(ngModel)]="draft.capacity" />
      </div>
      <div class="col-sm-3">
        <label class="form-label">Base price</label>
        <input class="form-control" type="number" min="0" [(ngModel)]="draft.base_price" />
      </div>
      <div class="col-sm-12">
        <label class="form-label">Descripción</label>
        <textarea class="form-control" rows="2" [(ngModel)]="draft.description"></textarea>
      </div>
      <div class="col-sm-12">
        <label class="form-label">Imagen (URL portada)</label>
        <input class="form-control" [(ngModel)]="draft.image" />
        <div class="mt-2">
          <img
            *ngIf="draft.image"
            [src]="draft.image"
            alt="prev"
            style="width: 160px; height: 110px; object-fit: cover; border-radius: 8px"
          />
        </div>
      </div>
    </div>

    <div class="mt-3 d-flex gap-2">
      <button class="btn btn-success" (click)="save()">Guardar</button>
      <button class="btn btn-secondary" (click)="cancel()">Cancelar</button>
    </div>
  </div>
</div>

<table class="table table-striped" *ngIf="editingId == null">
  <thead>
    <tr>
      <th>#</th>
      <th>Nombre</th>
      <th>Capacidad</th>
      <th>Base price</th>
      <th>Portada</th>
      <th class="text-end">Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let rt of roomTypes; trackBy: trackById">
      <td>{{ rt.room_type_id }}</td>
      <td>{{ rt.name }}</td>
      <td>{{ rt.capacity }}</td>
      <td>{{ rt.base_price | currency : 'COP' : 'symbol-narrow' }}</td>
      <td>
        <img
          *ngIf="rt.image"
          [src]="rt.image"
          alt="img"
          style="width: 56px; height: 40px; object-fit: cover; border-radius: 6px"
        />
      </td>
      <td class="text-end">
        <button class="btn btn-sm btn-outline-primary me-2" (click)="edit(rt)">Editar</button>
        <button class="btn btn-sm btn-outline-danger" (click)="remove(rt)">Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>
