<form (ngSubmit)="submit()" #form="ngForm" class="card mt-4 room-type-form">
  <div class="card-body row g-3">
    <h5 class="card-title col-12">Editar tipo de habitación</h5>

    <div class="col-md-6">
      <label class="form-label">Nombre</label>
      <input class="form-control input-soft" [(ngModel)]="draft.name" name="name" required />
    </div>

    <div class="col-md-3">
      <label class="form-label">Capacidad</label>
      <input
        type="number"
        class="form-control input-soft"
        [(ngModel)]="draft.capacity"
        name="capacity"
        min="1"
        required
      />
    </div>

    <div class="col-md-3">
      <label class="form-label">Precio Base</label>
      <input
        type="number"
        class="form-control input-soft"
        [(ngModel)]="draft.base_price"
        name="base_price"
        min="0"
        required
      />
    </div>

    <div class="col-12">
      <label class="form-label">Descripción</label>
      <textarea
        class="form-control input-soft"
        [(ngModel)]="draft.description"
        name="description"
        rows="2"
        required
      ></textarea>
    </div>

    <div class="col-12">
      <label class="form-label">Imagen (URL)</label>
      <input
        type="url"
        class="form-control input-soft"
        [(ngModel)]="draft.image"
        name="image"
        placeholder="https://ejemplo.com/imagen.jpg"
      />

      <div class="mt-3" *ngIf="draft.image">
        <div class="image-preview">
          <img
            [src]="draft.image"
            (load)="onImageLoad()"
            (error)="onImageError()"
            [class.opacity-0]="imgBroken"
            style="
              width: 200px;
              height: 140px;
              object-fit: cover;
              border-radius: 8px;
              border: 1px solid #dee2e6;
            "
            alt="Vista previa de la imagen"
          />
          <div *ngIf="imgBroken" class="text-danger mt-2">
            <i class="bi bi-exclamation-triangle-fill"></i>
            No se pudo cargar la imagen
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 text-end">
      <button
        type="button"
        class="btn btn-outline-olive me-2"
        (click)="cancel.emit()"
        [disabled]="loading"
      >
        Cancelar
      </button>
      <button type="submit" class="btn btn-olive" [disabled]="loading || form.invalid">
        Guardar
      </button>
    </div>
  </div>
</form>
